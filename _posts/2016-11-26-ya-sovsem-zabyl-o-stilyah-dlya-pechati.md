---
title: "Я совсем забыл о стилях для печати"
layout: post
categories: [development]
tags: [translation, css]
date: 2016-11-26 20:46:33 +0300
prism: yes
description: "Небольшая коллекция полезных техник CSS и краткое напоминание о том, что стили для печати до сих пор нужны"
original: "https://uxdesign.cc/i-totally-forgot-about-print-style-sheets-f1e6604cfd6#.1mmhlhas9"
original_title: "I totally forgot about print style sheets"
original_author: "Manuel Matuzovic"
thumbnail: "noimage"
---

[Аарон Густафсон](https://twitter.com/AaronGustafson) недавно обратился через  [твиттер](https://twitter.com/AaronGustafson/status/788073583528538112) к [Indiegogo ](http://indiegogo.com/), в котором он указал, что их страницы детального заказа непригодны к использованию в напечатанном виде.

Я был ошеломлен, когда увидел этот твит — я понял, что прошло уже много времени с тех пор, как я оптимизировал стили для печати и я даже не думал об их проверке.

Возможно, это произошло потому, что я трачу много времени на изменение размера окна браузера, чтобы гарантировать, что мои сайты работают прекрасно во всех размерах и формах,  а может потому, что я редко печатаю страницы для себя. Независимо от причин, я совершенно забыл о стилях для печати и это плохо.

Оптимизация веб-страниц для печати важна потому, что печатая страницы мы делаем сайт максимально доступным, независимо от среды. Мы не должны делать предположений о наших пользователях и их поведении. Люди продолжают печатать веб-страницы. Подумайте о статьях, записях в блогах, рецептах, контактной информации, сайтах с картами или объектами недвижимости. Кто-нибудь когда-нибудь обязательно попытается распечатать одну из ваших страниц.

>Я забросил домашние принтеры очень давно, так как мне всегда казалось, что они ломаются после 10 минут работы. Но не все такие, как я. — Хейдон Пикеринг  ([Inclusive Design Patterns](https://www.smashingmagazine.com/inclusive-design-patterns/))

Если вы заметили, что находитесь в похожем положении, этот пост поможет вам в быстром освежении знаний. Если вы не оптимизировали свои страницы для печати, следующие советы помогут вам начать.

## 1. Подключение стилей для печати

Лучшим способом подключения стилей для печати является объявление директивы `@media` в вашем CSS.

```css
body {
    font-size: 18px;
}

@media print {
    /* print styles go here */
    body {
        font-size: 28px;
    }
}
```

Альтернативно вы можете подключить стили в HTML, но это потребует дополнительного запроса HTTP.

```html
<link media="print" href="print.css" />
```

## 2. Тестирование

Вам не надо печатать страницу каждый раз, когда вы внесли небольшое изменение в стили. В зависимости от браузера, вы можете экспортировать страницу в PDF, использовать предварительный просмотр печати или проводить отладку непосредственно в браузере.

Для отладки стилей для печати в Firefox откройте панель разработки (`Shift + F2` или меню Tools > Web Developer > Developer Toolbar), введите в поле ввода `media emulate print` и нажмите  `enter`. Активная вкладка  до перезагрузки будет работать так,  как будто типом медиа является `print`.

![Активация эмуляции в Firefox](/images/development/css/ff-emulate-print.png)

*Эмуляция стилей для печати в Firefox*

В Chrome откройте инструменты разработчика (`CMD + Opt + I` (macOS) или `Ctrl + Shift + I` (Windows) или меню View > Developer > Developer Tools) и вывести  консоль, открыть  панель рендеринга и в меню Emulate CSS Media выбрать Print.

![Активация эмуляции в Chrome](/images/development/css/chrome-emulate-print.png)

*Эмуляция стилей для печати в Chrome*

## 3. Абсолютные единицы измерения

Абсолютные единицы измерения это плохо на экране, но отлично для печати. В стилях для печати их использование совершенно безопасно и даже рекомендовано использовать [такие единицы](https://developer.mozilla.org/de/docs/Web/CSS/length) как `cm`, `mm`, `in`, `pt` или `pc`.

```css
section {
    margin-bottom: 2cm;
}
```

## 4. Специфические правила для страниц

Можно задать свойства, специфичные для печатной страницы, такие как ее размеры, ориентация и отступы с помощью директивы `@page`. Это очень удобно, если вы хотите, чтобы у всех страниц были определенные отступы.

```css
@media print {
     @page {
        margin: 1cm;
    }
}
```

Директива `@page` это часть спецификации [Paged Media Module](https://drafts.csswg.org/css-page-3/), в которой есть такие замечательные вещи, как возможность выбрать первую печатаемую страницу или пустые страницы, позиционировать элементы в углу страницы и [многое другое](https://www.smashingmagazine.com/2015/01/designing-for-print-with-css/). Это можно использовать даже для [печати книг](https://alistapart.com/article/building-books-with-css3).

## 5. Управление разрывами страниц

Так как печатные страницы, в отличие от веб-страниц, не являются бесконечными, контент будет разбиваться между страницами. У нас есть 5 свойств для управления тем, как это происходит.

####  Разрыв страницы перед элементом.

Если мы хотим, чтобы элемент всегда был в начале страницы, мы можем задать принудительный разрыв страницы с помощью правила `page-break-before`.

```css
section {
    page-break-before: always;
}
```

[page-break-before  на MDN](https://developer.mozilla.org/en/docs/Web/CSS/page-break-before)

####  Разрыв страницы после элемента.

Правило `page-break-after` позволяет нам форсировать или запрещать разрывы страниц после элемента.

```css
h2 {
    page-break-after: always;
}
```

[page-break-after на MDN](https://developer.mozilla.org/en/docs/Web/CSS/page-break-after)

####  Разрыв страницы внутри элемента

Это свойство удобно, если вам надо избежать разрыва страницы внутри элемента.

```css
ul {
    page-break-inside: avoid;
}
```

[page-break-inside на MDN](https://developer.mozilla.org/en/docs/Web/CSS/page-break-inside)

####  Вдовы и сироты  (висячие строки)

Иногда вам не нужен контроль над разрывом страницы, но важен  контроль над тем, сколько строчек будет выведено на текущей, а сколько на следующей странице. Например, если последняя строка параграфа не помещается на текущей странице, на следующую страницу она будет перенесена вместе с предпоследней. Это потому, что соответствующее свойство `widows` по умолчанию равно 2. Мы можем изменить его.

```css
p {
    widows: 4;
}
```

Если мы столкнемся с другой стороной этой проблемы и на текущей странице у нас помещается только первая строка параграфа, то тогда весь параграф начнется со следующей страницы. За это отвечает свойство  `orphans` и его дефолтное значение 2.

```css
p {
    orphans: 3;
}
```


Этот код означает, что как минимум 3 строки должны помещаться на текущей странице, чтобы параграф не переносился на следующую.

Вот [демо на Codepen](http://codepen.io/matuzo/pen/oYvBjN)  с несколькими примерами ([отладочная версия для тестирования](http://s.codepen.io/matuzo/debug/oYvBjN)).

Не все из этих свойств и значений работают в каждом браузере, вы должны проверять стили для печати в разных браузерах.

## 6. Сброс стилей

Имеет смысл сбросить для печати некоторые стили типа `background-color`, `box-shadow` и `color`.

Вот выдержка из [стилей для печати HTML5 Boilerplate](https://github.com/h5bp/html5-boilerplate/blob/master/dist/css/main.css):

```css
*,
*:before,
*:after,
*:first-letter,
p:first-line,
div:first-line,
blockquote:first-line,
li:first-line {
    background: transparent !important;
    color: #000 !important;
    box-shadow: none !important;
    text-shadow: none !important;
}
```

Стили для печати это одно из тех немногих исключений, когда использование ключевого слова `!important` вполне нормально.

## 7. Удаление необязательного контента

Чтобы избежать излишней траты чернил, вы должны удалить ненужное — оформительские элементы, рекламу, навигацию и т.п. с помощью свойства `display: none`.

Вы, в принципе, можете показать только основной контент и спрятать все остальное:

```css
body > *:not(main) {
    display: none;
}
```

## 8. Печать адресов ссылок

Распечатанные ссылки бесполезны, если вы не знаете, куда они ведут. 

Печать адреса ссылки рядом с ее текстом делается совершенно легко:

```css
a[href]:after {
    content: " (" attr(href) ")";
}
```

Конечно, так будут показано все: относительные ссылки, абсолютные ссылки,  якоря и прочее. Следующий вариант будет работать лучше:

```css
a[href^="http"]:not([href*="mywebsite.com"]):after {
    content: " (" attr(href) ")";
}
```

Смотрится безумно, я знаю. Эти строчки работают так: выводится значение атрибута `href` рядом с любой ссылкой, у которой он есть, если он начинается с `http`, но не ведет на наш `mywebsite.com`.

## 9. Печать расшифровок аббревиатур

Аббревиатуры должны оборачиваться элементом  `<abbr>` с указанием расшифровки в атрибуте `title`. Имеет смысл вывести это на печать.

```css
abbr[title]:after {
    content: " (" attr(title) ")";
}
```

## 10. Печать фона 

Обычно браузеры не печатают фоновый цвет и фоновые изображения, если вы прямо не укажете им. Есть нестандартизированное [свойство](https://developer.mozilla.org/de/docs/Web/CSS/-webkit-print-color-adjust) `print-color-adjust`, позволяющее переписать настройки по умолчанию в некоторых браузерах.

```css
header {
    -webkit-print-color-adjust: exact;
    print-color-adjust: exact;
}
```

## 11. Медиазапросы

Если вы пишете медиазапросы как в следующем примере, имейте в виду, что стили в этом медиазапросе не будут применяться при печати.

```css
@media screen and (min-width: 48em) {
    /* screen only */ 
}
```

Вы спросите, почему? Потому что правила CSS применяются только при выполнении обоих условий: `min-width` равен `48em`,  `media-type` — `screen`. Если избавиться от ключевого слова `screen`, то медиазапрос будет учитывать только значение `min-width`.

```css
@media (min-width: 48em) {
    /* all media types */ 
}
```

## 12. Печать карт

Текущие версии Firefox и Chrome способны печатать карты, а вот Safari нет. Некоторые сервисы предоставляют [статические карты](http://staticmapmaker.com/), которые можно печатать вместо оригинала.

```css
.map {
    width: 400px;
    height: 300px;
    background-image: url('http://maps.googleapis.com/maps/api/staticmap?center=Wien+Floridsdorf&zoom=13&scale=false&size=400x300&maptype=roadmap&format=png&visual_refresh=true');
    -webkit-print-color-adjust: exact;
    print-color-adjust: exact;
}
```

## 13. QR-коды

В [статье от Smashing Magazine ](https://www.smashingmagazine.com/2013/03/tips-and-tricks-for-print-style-sheets/#print-qr-codes-for-easy-url-references) есть несколько полезных советов. Один из них заключается в создании QR-кодов для распечатываемых страниц, чтобы пользователям не приходилось набирать полный URL для доступа к странице.


## Дополнение: печать неоптимизированных страниц

В ходе моего исследования, я нашел отличный инструмент, помогающий при печати неоптимизированных страниц. С [Printliminator](https://css-tricks.github.io/The-Printliminator/) вы можете удалить ненужные элементы, просто нажав на них.

Вот [демо на YouTube](https://www.youtube.com/watch?v=Dt8hpqEIL1c) и сам [проект на GitHub](https://github.com/CSS-Tricks/The-Printliminator).

## Дополнение 2: Gutenberg

Если вы ищете фреймворк, то вам  может понравиться [Gutenberg](https://github.com/BafS/Gutenberg), делающий оптимизацию страниц немного проще.

## Дополнение 3: Hartija

Это еще один [фреймворк](https://github.com/vladocar/Hartija---CSS-Print-Framework) для создания стилей для печати от [Владимира Каррера](https://medium.com/u/4c25f07f8cbe).

