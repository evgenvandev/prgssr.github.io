---
layout: post
title: "Юникод в вебе: введение для начинающих"
categories: [development]
tags: [typography, unicode, translation, tutsplus]
date: 2015-11-26 22:17:30
description: "Прошлогодняя статья о Unicode. Основные вопросы  использования Юникода в вебе плюс несколько ссылки на полезные сервисы"
prism: yes
original: "http://webdesign.tutsplus.com/tutorials/unicode-a-beginners-primer--webdesign-18005"
original_title: "Unicode: A Beginner’s Primer"
original_author: "John Holt Ripley"
thumbnail: "/images/development/typography/shape.png"
---

Верите вы или нет, но существует формат изображений, встроенных в браузер. Этот формат позволяет загружать изображения до того, как они понадобились, обеспечивает рендеринг изображения на обычных или retina экранах и позволяет добавлять к изображениям CSS. ОК, это не совсем правда. Это не формат изображения, хотя все остальное остается в силе. Используя его вы можете создавать иконки, независимые от разрешения, не требующие время на загрузку и стилизуемые с помощью CSS.

В этой статье я опишу основы Unicode (далее - [Юникод](https://ru.wikipedia.org/wiki/%D0%AE%D0%BD%D0%B8%D0%BA%D0%BE%D0%B4)) и некоторые интересные вещи, которые вы можете сделать с его помощью.

## Что такое Юникод?

Юникод это возможность корректно отображать буквы и знаки пунктуации из различных языков на одной страницы. Он невероятно полезен: пользователи смогут работать с  вашим сайтом по всему миру и он будет показывать то, что вы хотите --- это может быть французский язык с диакритическими знаками или [Kanji](http://en.wikipedia.org/wiki/Kanji).

Юникод продолжает развиваться: сейчас актуальна версия 8.0 в которой более 120 тысяч символов (в оригинальной статье, опубликованной в начале 2014 года, речь шла о версии 6.3 и 110 тысячах символов). 

Кроме букв и цифр, в Юникоде есть и другие символы и иконки. В последних версиях в их число вошли [эмодзи](http://en.wikipedia.org/wiki/Emoji), которые вы можете видеть в месседжере iOS.

![Юникод в мессенджере](/images/development/typography/iphone-emoji.jpg)

Страницы HTML создаются из последовательности символов Юникода и при отсылке по сети они конвертируются в байты. Каждая буква и каждый символ любого языка имеют свой уникальный код и кодируются при сохранении файла.

При  использовании системы кодирования  UTF-8  вы можете напрямую вставлять в текст символы Юникода, но также можно добавлять их в текст, указывая цифровую символьную ссылку. Например, `&#9829;` это символ сердечка и вы можете вывести этот символ, просто добавив код в разметку &#9829;.

Эту числовую ссылку можно задавать как в десятичном формате, так и в шестнадцатеричном. Десятичный формат требует добавления в начале буквы `x`, запись `&#x2665;` даст то же самое сердечко (&#x2665;), что и предыдущий вариант. (2665 это шестнадцатеричный вариант 9829).

Если вы добавляете символ Юникода с помощью CSS, то вы можете использовать только [шестнадцатеричные значения](http://www.w3.org/International/questions/qa-escapes#cssescapes).

Некоторые наиболее часто используемые символы Юникода имеют более запоминаемые текстовые имена или аббревиатуры вместо цифровых кодов --- это, например, амперсанд (`&amp;` --- &amp;). Такие символы называются *мнемоники в HTML*, [их полный список есть в Википедии](https://ru.wikipedia.org/wiki/%D0%9C%D0%BD%D0%B5%D0%BC%D0%BE%D0%BD%D0%B8%D0%BA%D0%B8_%D0%B2_HTML).

## Почему вам стоит использовать Юникод?

Хороший вопрос, вот несколько причин:

1. Чтобы использовать корректные символы из разных языков.
2. Для замены иконок.
3. Для замены иконок, подключаемых через `@font-face`.
4. Для задания CSS-классов

### Корректные символы

Первая из причин не требует никаких дополнительных действий. Если HTML сохранен в формате UTF-8 и его кодировка передана по сети как UTF-8, все должно работать как надо.

Должно. К сожалению, не все браузеры и устройства поддерживают все символы Юникода одинаково (точнее, не все шрифты поддерживают полный набор символов). Например, недавно добавленные символы эмодзи поддерживаются не везде.

Для поддержки UTF-8 в HTML5 добавьте `<meta charset=utf-8>` (при отсутствии доступа к настройкам сервера стоит добавить также `<meta http-equiv= "Content-Type" content="text/html; charset=utf-8">`). При старом доктайпе используется (`<meta http-equiv="content-type" content="text/html; charset=UTF-8" />`).

### Иконки

Вторая причина использования Юникода это наличие большого количества полезных символов, которые можно использовать в качестве иконок. Например,  ▶, ≡ и ♥.

Их очевидный плюс в том, что вам не надо никаких дополнительных файлов, чтобы добавить их на страницу, а, значит, ваш сайт будет быстрее. Вы также можете изменить их  цвет или добавить тень с помощью CSS. А добавив переходы (css transition) вы сможете плавно менять цвет иконки при наведении на нее без каких-либо дополнительных изображений.

Предположим, что я хочу подключить индикатор рейтинга со звездами на свою страницу. Я могу сделать это так:

```markup
<span>&#x2605; &#x2605; &#x2605; &#x2606; &#x2606;</span>
```

Получится следующий результат:

![Образец рейтинга в Firefox](/images/development/typography/rating-firefox.jpg)
*Образец рейтинга в Firefox*

Но если вам не повезет, вы увидите что-то вроде этого:

![рейтинг на BlackBerry 9000](/images/development/typography/rating-blackberry.jpg) 
*Тот же рейтинг на BlackBerry 9000*

Так бывает, если используемые символы отсутствуют в шрифте браузера или  устройства (к счастью, эти звездочки поддерживаются отлично и старые телефоны BlackBerry являются здесь единственным исключением).

Если символ Юникода отсутствует, на его месте могут быть разные символы от пустого квадрата (□) до ромба со знаком вопроса (�).

А как  найти символ Юникода, который может подойти для использования в вашем дизайне? Вы можете поискать его на сайте типа [Unicodinator](http://unicodinator.com/), просматривая имеющиеся символы, но есть и лучший вариант. [Shapecatcher](http://shapecatcher.com/) --- этот отличный сайт позволяет вам нарисовать искомую иконку, после чего предлагает вам список похожих символов Юникода.

![Shapecatcher](/images/development/typography/shape.png){: itemprop="image"}

### Использование Юникода с `@font-face` иконками

Если вы используете иконки, подключаемые с внешним шрифтом через `@font-face`, символы Юникода можно использовать в качестве запасного варианта. Таким образом вы можете показать похожий символ Юникода на тех устройствах или в браузерах, где `@font-face` не поддерживается:

![иконки Font Awesome и замещающие их символы Юникода](/images/development/typography/chrome-mini-glyphs.jpg)

Слева иконки Font Awesome в Chrome, а справа замещающие их символы Юникода в Opera Mini.

Многие инструменты для подбора `@font-face` используют диапазон символов Юникода из области для частного использования ([private use area](https://en.wikipedia.org/wiki/Private_Use_Areas)). Проблема этого подхода в том, что если `@font-face` не поддерживается, пользователю передаются коды символов без какого-либо смысла.

Использование символов из области для частного использования может также вынудить  Internet Explorer 8 [перейти в режим совместимости](http://htmlbook.ru/samlayout/rezhimy-brauzerov/rezhimy-internet-explorer), а это сродни открытию портала в ад и призванию отвратительных монстров из старых IE (подробнее эта [проблема описана в статье Джереми Кита](http://adactio.com/journal/6555/)).

[IcoMoon](http://icomoon.io/) отлично подходит для создания наборов иконок в `@font-face` и позволяет выбрать в качестве основы для иконки подходящий символ Юникода.

![IcoMoon](/images/development/typography/icomoon-glyphs.jpg)

Но будьте внимательны --- некоторые браузеры и устройства не любят отдельные символы Юникода при их использовании с `@font-face`. Имеет смысл проверить [поддержку символов Юникода с помощью Unify](http://unicode.johnholtripley.co.uk/) --- это приложение поможет вам определить, насколько безопасно использование символа в наборе иконок `@font-face`.

#### Поддержка символов Юникода

Основная проблема с использованием символов Юникода в качестве запасного варианта это плохая поддержка в скринридерах  (опять-таки, [некоторые сведения об этом можно найти на Unify](http://unicode.johnholtripley.co.uk/all/screenreader)), поэтому важно осторожно выбирать используемые символы.

Если ваша иконка это просто декоративный элемент рядом с текстовой меткой, читаемым скринридером, вы можете особо не волноваться. Но если иконка расположена отдельно, стоит добавить скрытую текстовую метку, чтобы помочь пользователям скринридеров. Даже если символ Юникода будет считан скринридером, есть вероятность, что он будет сильно отличен от своего предназначения. Например,  `&#x2261;` (&#x2261;)  в качестве иконки-гамбургера будет считан  VoiceOver на iOS  как "идентичный".

### Юникод в названиях CSS-классов

То, что Юникод можно использовать в названиях классов и в таблицах стилей известно с 2007 года. Именно тогда Джонатан Снук написал об [использовании символов Юникода во вспомогательных классов при верстке скругленных углов](http://snook.ca/archives/html_and_css/unicode_for_css_class_names). Особого распространения эта идея не получила, но о возможности использовать Юникод в названиях классов (спецсимволы или кириллицу) знать стоит.

## Выбор шрифтов

Совсем немногие шрифты поддерживают полный набор символов Юникода, поэтому при выборе шрифта сразу проверяйте наличие нужных вам символов.

Из шрифтов с полной [поддержкой Юникода](https://en.wikipedia.org/wiki/Unicode_font) наиболее известны [Noto, поддерживающий Юникод версии 6.2](https://en.wikipedia.org/wiki/Noto_fonts) и [GNU Unifont (версия Юникода 8.0.01)](https://en.wikipedia.org/wiki/GNU_Unifont). 

Много иконок в  `Segoe UI Symbol` или `Arial Unicode MS`. Эти шрифты есть и на PC и на Mac; в `Lucida Grande` также достаточное количество символов Юникода. Вы можете добавить эти шрифты в декларацию `font-family`, чтобы обеспечить наличие максимального количества символов Юникода для пользователей, у которых эти шрифты установлены.

## Определение поддержки Юникода

Было бы очень удобно иметь возможность проверить наличие того или иного символа Юникода, но нет гарантированного способа сделать это.

В Modernizr есть [проверка поддержки эмодзи](https://github.com/Modernizr/Modernizr/blob/master/feature-detects/emoji.js) --- но она работает проверкой одного пикселя и поэтому даст неправильный результат, если в нужном символе этот пиксель не используется. Да и сама проверка наличия отдельного символа не скажет ничего о поддержке остальных ста тысяч.

Проверяйте. И обеспечивайте запасные варианты, чтобы пользователь всегда мог понять, что происходит при отсутствии нужного символа. 

## Юникод в письмах

Юникод можно использовать не только на веб-страницах, но и в письмах.

Но здесь есть та же проблема: некоторые почтовые клиенты и некоторые устройства поддерживают нужные символы, а некоторые нет. Небольшое [тестирование, позволяющее определить уровень поддержки символов,  было проведено Campaign Monitor](https://www.campaignmonitor.com/dev-resources/will-it-work/symbols/).

Символы Юникода могут быть эффективны при наличии поддержки. Например, эмодзи в теме письма выделяет его на фоне остальных в почтовом ящике.


## Заключение

Эта статья затрагивает лишь основы Юникода. Надеюсь, она окажется полезной  и поможет вам лучше понять Юникод и эффективно применять его.


## Список ссылок 

* ["Пуленепробиваемые" иконочные шрифты](http://filamentgroup.com/lab/bulletproof_icon_fonts/)
* [Символы Юникода в теме письма](http://www.campaignmonitor.com/resources/will-it-work/symbols/)
* [IcoMoon](http://icomoon.io/) (Генератор набора иконок @font-face на основе Юникода)
* [Shape Catcher ](http://shapecatcher.com/)(Инструмент для распознавания символов Юникода)
* [Unicodinator](http://unicodinator.com/)(таблица символов Юникода)
* [Unify](http://unicode.johnholtripley.co.uk/) (Проверка поддержки символов Юникода в браузерах)
* [Unitools](https://www.unicod.es/) (Коллекция инструментов для работы с Юникодом)


